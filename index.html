<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Demo project supabase vercel</title>

<!-- Dùng cho RenderProducts.js -->
<link rel="stylesheet" href="createProduct.css">
<!---->

<!-- Dùng cho detailProducts.js -->
<link rel="stylesheet" href="detailProduct.css">
<!---->

<!-- Dùng cho viewProducts.js -->
<link rel="stylesheet" href="viewProduct.css">
<!---->


  <style>

  </style>
</head>
<body>
  <div id="app"></div>

<!-- Framework -->
<script src="./framework/Debugger.js"></script>
<script src="./framework/vdom.js"></script>
<script src="./framework/hooks.js"></script>
<script src="./framework/router.js"></script>
<script src="./framework/init_API.js"></script>
<!---->

<!-- INIT SUPABASE TRƯỚC -->
<script type="module">
  import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';

  const supabase = createClient(
    'https://grqqujqmqdyjzmxhjnar.supabase.co', 'sb_publishable_IW9yo3BRwaIHWONk1rIn3w_w-ou1lpM'
  );

  // Lưu vào window nếu cần các file khác dùng (không khuyến khích lắm, tốt nhất dùng import)
  window.supabase = supabase;

  console.log('Supabase client initialized');

  // Cách load script theo thứ tự và chờ nhau (cách đơn giản nhất)
  async function loadScriptsInOrder() {
    const scripts = [
      //'CreateProduct.js', // Tạo sản phẩm
      'createProduct_images.js', // Tạo sản phẩm
      'viewProduct.js',   // Xem danh sách
      'detailProduct_.js', // Xem chi tiết
      'RoutesMenu.js'     // routing + UI
    ];

    for (const src of scripts) {
      await new Promise((resolve, reject) => {
        const script = document.createElement('script');
        //script.type = 'module'; // rất quan trọng nếu file dùng import/export
        script.src = src;
        script.onload = () => {
          console.log(`Loaded: ${src}`);
          resolve();
        };
        script.onerror = () => {
          console.error(`Failed to load: ${src}`);
          reject();
        };
        document.body.appendChild(script);
      });
    }

    console.log('All core scripts loaded!');
    // Có thể dispatch event để báo cho app biết đã sẵn sàng
    window.dispatchEvent(new Event('app:ready'));
  }

  // Chạy sau khi supabase sẵn sàng
  loadScriptsInOrder().catch(err => {
    console.error('Critical error loading application scripts', err);
  });
</script>

</body>
</html>

<!----
https://framework-frontend-vdom-v01.vercel.app/postsnew
<!---->